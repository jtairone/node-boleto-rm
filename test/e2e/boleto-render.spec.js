const moment = require('moment')
const chai = require('chai')
chai.use(require('chai-string'))
const expect = chai.expect

const Boleto = require('../../index').Boleto
const boletoOutput = require('./boleto-output')

const createBoleto = (bank) => new Boleto({
  'banco': bank,
  'data_emissao': moment('2017-01-01').format(),
  'data_vencimento': moment('2017-01-05').format(),
  'valor': 1500,
  'nosso_numero': '6',
  'numero_documento': '1',
  'cedente': 'Pagar.me Pagamentos S/A',
  'cedente_cnpj': '18727053000174',
  'agencia': '1229',
  'codigo_cedente': '469',
  'carteira': '25',
  'pagador': 'Nome do pagador\nCPF: 000.000.000-00<script>alert(1)</script>',
  'local_de_pagamento': 'PAGÁVEL EM QUALQUER BANCO ATÉ O VENCIMENTO.',
  'instrucoes': 'Sr. Caixa, aceitar o pagamento e não cobrar juros após o vencimento.<script>alert(1)</script>'
})

describe('Boleto Rendering', () => {
  describe('when using img rendering engine', () => {
    before(() => {
      Boleto.barcodeRenderEngine = 'img'
    })

    describe('when rendering a valid bradesco boleto', () => {
      let output
      before((done) => {
        const boleto = createBoleto('bradesco')
        boleto.renderHTML((html) => {
          output = html
          done()
        })
      })

      it('should produce proper HTML', () => {
        const barcode = '<img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/>'
        // '
        expect(output).to.equalIgnoreSpaces(boletoOutput('https://assets.pagar.me/boleto/images/bradesco.jpg', '237-2', '23791.22928 50000.000005 06000.046901 4 70300000001500', barcode, ''))
      })
    })

    describe('when rendering a valid santander boleto', () => {
      let output
      before((done) => {
        const boleto = createBoleto('santander')
        boleto.renderHTML((html) => {
          output = html
          done()
        })
      })

      it('should produce proper HTML', () => {
        const barcode = '<img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="3px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/b.png" height="50px" width="1px;" border=0/> <img class="barcode-line" src="https://assets.pagar.me/boleto/images/w.png" height="50px" width="1px;" border=0/>'
        // '
        expect(output).to.equalIgnoreSpaces(boletoOutput('https://assets.pagar.me/boleto/images/santander.png', '033-7', '03399.00003 46900.000004 00006.00254 6 70300000001500', barcode, ''))
      })
    })
  })

  describe('when using bmp rendering engine', () => {
    before(() => {
      Boleto.barcodeRenderEngine = 'bmp'
    })

    describe('when rendering a valid bradesco boleto', () => {
      let output
      before((done) => {
        const boleto = createBoleto('bradesco')
        boleto.renderHTML((html) => {
          output = html
          done()
        })
      })

      it('should produce proper HTML', () => {
        const bmpBarcode = 'background-image: url(data:image/bmp;base64,Qk2VAQAAAAAAADYAAAAoAAAAlQEAAAEAAAABACAAAAAAAAAAAAATCwAAEwsAAAAAAAAAAAAAAAAAAP///wAAAAAA////AAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAAAAAAAAAAAA////AAAAAAD///8AAAAAAP///wD///8A////AAAAAAD///8AAAAAAAAAAAAAAAAA////AP///wD///8AAAAAAAAAAAAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8AAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAD///8A////AP///wAAAAAA////AP///wD///8AAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8A////AP///wAAAAAA////AAAAAAAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAD///8AAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wAAAAAA////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8A////AP///wAAAAAA////AAAAAAAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAD///8AAAAAAP///wD///8A////AAAAAAD///8AAAAAAAAAAAAAAAAA////AP///wD///8AAAAAAP///wAAAAAA////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAD///8AAAAAAAAAAAAAAAAA////AP///wD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8AAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wAAAAAA////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAD///8AAAAAAAAAAAAAAAAA////AAAAAAD///8AAAAAAAAAAAAAAAAA////AAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAAAAAAAAAAAAP///wAAAAAA////AA==);background-repeat: repeat-y;'
        expect(output).to.equalIgnoreSpaces(boletoOutput('https://assets.pagar.me/boleto/images/bradesco.jpg', '237-2', '23791.22928 50000.000005 06000.046901 4 70300000001500', '', bmpBarcode))
      })
    })

    describe('when rendering a valid santander boleto', () => {
      let output
      before((done) => {
        const boleto = createBoleto('santander')
        boleto.renderHTML((html) => {
          output = html
          done()
        })
      })

      it('should produce proper HTML', () => {
        const bmpBarcode = 'background-image: url(data:image/bmp;base64,Qk2VAQAAAAAAADYAAAAoAAAAlQEAAAEAAAABACAAAAAAAAAAAAATCwAAEwsAAAAAAAAAAAAAAAAAAP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAD///8AAAAAAP///wAAAAAA////AAAAAAD///8AAAAAAAAAAAAAAAAA////AP///wD///8AAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAA////AP///wD///8AAAAAAAAAAAAAAAAA////AP///wD///8AAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAD///8AAAAAAP///wD///8A////AAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAD///8AAAAAAP///wD///8A////AAAAAAD///8AAAAAAAAAAAAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAAAAAAAAAAAA////AAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8AAAAAAP///wD///8A////AAAAAAD///8AAAAAAAAAAAAAAAAA////AP///wD///8AAAAAAAAAAAAAAAAA////AAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8AAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wD///8A////AAAAAAAAAAAAAAAAAP///wAAAAAA////AAAAAAD///8AAAAAAP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8A////AP///wAAAAAA////AAAAAAD///8A////AP///wAAAAAAAAAAAAAAAAD///8AAAAAAP///wD///8A////AAAAAAD///8AAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAP///wAAAAAA////AA==);background-repeat: repeat-y;'
        expect(output).to.equalIgnoreSpaces(boletoOutput('https://assets.pagar.me/boleto/images/santander.png', '033-7', '03399.00003 46900.000004 00006.00254 6 70300000001500', '', bmpBarcode))
      })
    })
  })
})
